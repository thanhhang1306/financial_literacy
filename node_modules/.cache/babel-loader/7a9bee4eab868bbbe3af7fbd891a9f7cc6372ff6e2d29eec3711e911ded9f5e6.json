{"ast":null,"code":"/* Singleton class that holds the current state of the game,\n   and handles the main life cycle of the game. */\nimport { Wants, Needs } from './ChoiceData.js';\nconst CARD_TYPE = {\n  NEED: 0,\n  WANT: 1,\n  EVENT: 2\n};\nclass GameManager {\n  static init() {\n    if (GameManager._gameManagerInstance == null) GameManager._gameManagerInstance = new GameManager();\n  }\n  static getInstance() {\n    return GameManager._gameManagerInstance;\n  }\n  constructor() {\n    this.gameState = GameManager.GAME_STATE.DRAW_CARDS;\n    this.year = 1;\n    this.balance = 1000;\n    this.salary = 80000;\n    this.savings = 0;\n    this.investment = 0;\n    this.debt = 0;\n    this.incomeSources = [];\n    this.expenseSources = [];\n    this._currentCardsDrawn = [];\n    this._currentCardSelections = [];\n\n    //\n    this.selectedNeed = 0;\n    this.selectedWant = 0;\n    this.selectedDebt = 0;\n    this.selectedTotal = 0;\n    this.selectedSavings = 0;\n    this.selectedInvestments = 0;\n  }\n  getRandomIndex(array) {\n    return Math.floor(Math.random() * array.length);\n  }\n  drawRandomCard() {\n    const cardType = Math.round(Math.random()); // 0 for Needs, 1 for Wants\n    const data = cardType ? Wants : Needs;\n    const randomIndex = this.getRandomIndex(data);\n    const randomCard = data[randomIndex];\n    console.log(randomCard);\n    return randomCard;\n  }\n  toggleSelection(cardIndex) {\n    if (this.gameState !== GameManager.GAME_STATE.SELECT_CARDS) return;\n    const card = this._currentCardsDrawn[cardIndex];\n    if (this._currentCardSelections.includes(card)) {\n      this._currentCardSelections = this._currentCardSelections.filter(c => c !== card);\n    } else {\n      this._currentCardSelections.push(card);\n    }\n  }\n  getCardSelections() {\n    return this._currentCardSelections;\n  }\n  drawCards() {\n    if (this.gameState !== GameManager.GAME_STATE.DRAW_CARDS) return;\n    this.gameState = GameManager.GAME_STATE.SELECT_CARDS;\n    this._currentCardsDrawn.push(new Card(CARD_TYPE.NEED, \"NEED\", 100));\n    this._currentCardsDrawn.push(new Card(CARD_TYPE.WANT, \"Want\", 100));\n    this._currentCardsDrawn.push(new Card(CARD_TYPE.WANT, \"WantEvent\", 100));\n    for (const card of this._currentCardsDrawn) {\n      if (!card.selectable) continue;\n      this.selectedNeed = 100;\n      if (card.cardType === CARD_TYPE.NEED) this.selectedNeed += card.value;else if (card.cardType === CARD_TYPE.EVENT) this.selectedWant += card.value;\n    }\n    this.lazyUpdateUI();\n    return this._currentCardsDrawn;\n  }\n  getSelectedValues() {\n    return {\n      need: this.selectedNeed,\n      want: this.selectedWant,\n      debt: this.selectedDebt,\n      total: this.selectedTotal,\n      savings: this.selectedSavings,\n      investments: this.selectedInvestments\n    };\n  }\n  lazyUpdateUI() {\n    document.querySelector(\".need\").innerHTML = \"Need: $\" + this.selectedNeed;\n    document.querySelector(\".want\").innerHTML = \"Want: $\" + this.selectedWant;\n    document.querySelector(\".debt\").innerHTML = \"Debt: $\" + this.selectedDebt;\n    document.querySelector(\".salary-discrepancy\").innerHTML = \"Salary + Discrepency: $\" + this.selectedTotal;\n    document.querySelector(\".saving\").innerHTML = \"Saving: $\" + this.selectedSavings;\n    document.querySelector(\".investment\").innerHTML = \"Investment: $\" + this.selectedInvestments;\n    //\n    document.querySelector(\".salary\").innerHTML = \"Salary: $\" + this.salary;\n    document.querySelector(\".savings\").innerHTML = \"Savings: $\" + this.savings;\n    document.querySelector(\".investment\").innerHTML = \"Investment: $\" + this.investment;\n    document.querySelector(\".debt\").innerHTML = \"Debt: $\" + this.debt;\n  }\n}\nGameManager.GAME_STATE = {\n  DRAW_CARDS: 0,\n  SELECT_CARDS: 1,\n  RESOLVE_CARDS: 2,\n  END_GAME: 3\n};\nGameManager._gameManagerInstance = null;\nclass Card {\n  constructor(cardType, description, value) {\n    this.cardType = cardType;\n    this.description = description;\n    this.value = value;\n    this.selectable = cardType == CARD_TYPE.WANT ? true : false;\n  }\n}\n\n// Data.\n\nexport default GameManager;","map":{"version":3,"names":["Wants","Needs","CARD_TYPE","NEED","WANT","EVENT","GameManager","init","_gameManagerInstance","getInstance","constructor","gameState","GAME_STATE","DRAW_CARDS","year","balance","salary","savings","investment","debt","incomeSources","expenseSources","_currentCardsDrawn","_currentCardSelections","selectedNeed","selectedWant","selectedDebt","selectedTotal","selectedSavings","selectedInvestments","getRandomIndex","array","Math","floor","random","length","drawRandomCard","cardType","round","data","randomIndex","randomCard","console","log","toggleSelection","cardIndex","SELECT_CARDS","card","includes","filter","c","push","getCardSelections","drawCards","Card","selectable","value","lazyUpdateUI","getSelectedValues","need","want","total","investments","document","querySelector","innerHTML","RESOLVE_CARDS","END_GAME","description"],"sources":["/Users/hangpham/HackPrinceton/finance-app1/financial_literacy/src/core/gameManager.js"],"sourcesContent":["/* Singleton class that holds the current state of the game,\n   and handles the main life cycle of the game. */\nimport { Wants, Needs } from './ChoiceData.js';\n\nconst CARD_TYPE = {\n  NEED: 0,\n  WANT: 1,\n  EVENT: 2\n}\n\nclass GameManager {\n  static GAME_STATE = {\n    DRAW_CARDS: 0,\n    SELECT_CARDS: 1,\n    RESOLVE_CARDS: 2,\n    END_GAME: 3\n  }\n\n  static _gameManagerInstance = null;\n\n  static init() {\n    if (GameManager._gameManagerInstance == null)\n      GameManager._gameManagerInstance = new GameManager();\n  }\n\n  static getInstance() {\n    return GameManager._gameManagerInstance;\n  }\n\n  constructor() {\n    this.gameState = GameManager.GAME_STATE.DRAW_CARDS;\n    this.year = 1;\n    this.balance = 1000;\n    this.salary = 80000;\n    this.savings = 0;\n    this.investment = 0;\n    this.debt = 0;\n    this.incomeSources = [];\n    this.expenseSources = [];\n\n    this._currentCardsDrawn = [];\n    this._currentCardSelections = [];\n\n    //\n    this.selectedNeed = 0;\n    this.selectedWant = 0;\n    this.selectedDebt = 0;\n    this.selectedTotal = 0;\n    this.selectedSavings = 0;\n    this.selectedInvestments = 0;\n  }\n\n  getRandomIndex(array){\n    return Math.floor(Math.random() * array.length);\n  }\n  drawRandomCard() {\n    const cardType = Math.round(Math.random()); // 0 for Needs, 1 for Wants\n    const data = cardType ? Wants : Needs;\n    const randomIndex = this.getRandomIndex(data);\n    const randomCard = data[randomIndex];\n    console.log(randomCard);\n    return randomCard;\n  }\n\n  \n  toggleSelection(cardIndex) {\n    if (this.gameState !== GameManager.GAME_STATE.SELECT_CARDS) return;\n    const card = this._currentCardsDrawn[cardIndex];\n\n    if (this._currentCardSelections.includes(card)) {\n      this._currentCardSelections = this._currentCardSelections.filter(c => c !== card);\n    } else {\n      this._currentCardSelections.push(card);\n    }\n  }\n\n  getCardSelections() {\n    return this._currentCardSelections;\n  }\n\n  drawCards() {\n    if (this.gameState !== GameManager.GAME_STATE.DRAW_CARDS) return;\n    this.gameState = GameManager.GAME_STATE.SELECT_CARDS;\n\n    this._currentCardsDrawn.push(new Card(CARD_TYPE.NEED, \"NEED\", 100));\n    this._currentCardsDrawn.push(new Card(CARD_TYPE.WANT, \"Want\", 100));\n    this._currentCardsDrawn.push(new Card(CARD_TYPE.WANT, \"WantEvent\", 100));\n  \n    for (const card of this._currentCardsDrawn) {\n      if (!card.selectable) continue;\n      this.selectedNeed = 100;\n      if (card.cardType === CARD_TYPE.NEED) this.selectedNeed += card.value;\n      else if (card.cardType === CARD_TYPE.EVENT) this.selectedWant += card.value;\n    }\n    this.lazyUpdateUI();\n    return this._currentCardsDrawn;\n  }\n\n  getSelectedValues() {\n    return {\n      need: this.selectedNeed,\n      want: this.selectedWant,\n      debt: this.selectedDebt,\n      total: this.selectedTotal,\n      savings: this.selectedSavings,\n      investments: this.selectedInvestments\n    }\n  }\n\n  lazyUpdateUI() {\n    document.querySelector(\".need\").innerHTML = \"Need: $\" + this.selectedNeed;\n    document.querySelector(\".want\").innerHTML = \"Want: $\" + this.selectedWant;\n    document.querySelector(\".debt\").innerHTML = \"Debt: $\" + this.selectedDebt;\n    document.querySelector(\".salary-discrepancy\").innerHTML = \"Salary + Discrepency: $\" + this.selectedTotal;\n    document.querySelector(\".saving\").innerHTML = \"Saving: $\" + this.selectedSavings;\n    document.querySelector(\".investment\").innerHTML = \"Investment: $\" + this.selectedInvestments;\n    //\n    document.querySelector(\".salary\").innerHTML = \"Salary: $\" + this.salary;\n    document.querySelector(\".savings\").innerHTML = \"Savings: $\" + this.savings;\n    document.querySelector(\".investment\").innerHTML = \"Investment: $\" + this.investment;\n    document.querySelector(\".debt\").innerHTML = \"Debt: $\" + this.debt;\n  \n  }\n}\n\nclass Card {\n  constructor(cardType, description, value) {\n    this.cardType = cardType;\n    this.description = description;\n    this.value = value;\n    this.selectable = (cardType == CARD_TYPE.WANT) ? true : false;\n  }\n}\n\n\n\n\n\n// Data.\n\n\n\nexport default GameManager;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}